<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ –∫–≤–∞–¥—Ä–∞—Ç–∞ - –ò–≥—Ä–∞</title>
    <link rel="stylesheet" href="../../../styles.css">
    <link rel="stylesheet" href="square_game.css">
    <style>
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .username {
            font-weight: bold;
            color: #7c3aed;
        }

        .change-name-btn {
            background: #e9d5ff;
            color: #7c3aed;
            border: none;
            padding: 4px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-title">
                    <h1>–ò–≥—Ä–∞ "–†–∞—Å–ø–æ–∑–Ω–∞–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤"</h1>
                </div>
                <nav class="main-nav">
                    <a href="../main_page/index.html" class="nav-link">–ú–µ–Ω—é –∏–≥—Ä—ã</a>
                    <a href="../rating.html" class="nav-link">–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</a>
                </nav>
                <div class="user-info" id="user-info">
                    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="game-container">
            <div class="game-header">
                <div class="header-controls">
                    <button class="back-btn" onclick="return showExitModal()">
                        ‚Üê –ù–∞–∑–∞–¥
                    </button>
                    <button class="restart-btn" onclick="return showRestartModal()">
                        ‚Üª –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
                    </button>
                </div>

                <div class="game-stats">
                    <div class="timer">
                        <span>–í—Ä–µ–º—è:</span>
                        <span id="timer">05:00</span>
                    </div>
                    <div class="attempts">
                        <span>–û—à–∏–±–æ–∫ (–≤—Å–µ–≥–æ):</span>
                        <span id="wrong-attempts">0</span>
                    </div>
                    <div class="rotations">
                        <span>–ü–æ–≤–æ—Ä–æ—Ç—ã:</span>
                        <span id="rotation-count">0</span>
                    </div>
                    <div class="wrong-current">
                        <span>–û—à–∏–±–æ–∫ (—É—Ä–æ–≤–µ–Ω—å):</span>
                        <span id="wrong-attempts-current">0</span>
                    </div>
                    <div class="score">
                        <span>–ë–∞–ª–ª—ã:</span>
                        <span id="current-score">1200</span>
                    </div>
                </div>
            </div>

            <div class="game-area">
                <div class="search-area">
                    <h2>–ù–∞–π–¥–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–≤–∞–¥—Ä–∞—Ç:</h2>
                    <div class="error-message" id="error-message"></div>
                    <div class="squares-grid" id="squares-container"></div>
                </div>

                <div class="sample-area">
                    <h2>–û–±—Ä–∞–∑–µ—Ü</h2>
                    <div class="sample-square" id="sample-square"></div>
                    <button class="rotate-btn" onclick="rotateSample()">
                        –ü–æ–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ 90¬∞
                    </button>
                    <div class="level-info" id="level-info">
                        <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>


            </div>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal-overlay" id="modal-overlay"></div>

    <div class="modal" id="win-modal">
        <div class="modal-header">
            <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –∏–≥—Ä—É! üéâ</h2>
            <button class="close-modal" onclick="hideModal()">√ó</button>
        </div>
        <div class="modal-content">
            <div class="stats-grid">
                <div class="stat-item">
                    <strong id="win-username">–ò–≥—Ä–æ–∫</strong>
                    <span>–ò–≥—Ä–æ–∫</span>
                </div>
                <div class="stat-item">
                    <strong id="win-time">00:00</strong>
                    <span>–û–±—â–µ–µ –≤—Ä–µ–º—è</span>
                </div>
                <div class="stat-item">
                    <strong id="win-attempts">0</strong>
                    <span>–û—à–∏–±–æ–∫</span>
                </div>
                <div class="stat-item">
                    <strong id="win-rotations">0</strong>
                    <span>–ü–æ–≤–æ—Ä–æ—Ç—ã</span>
                </div>
                <div class="stat-item" style="grid-column: span 2;">
                    <strong id="win-score">1200</strong>
                    <span>–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–ª</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="window.location.href='../main_page/index.html'">
                    –í –º–µ–Ω—é
                </button>
                <button class="modal-btn" onclick="window.location.href='../rating.html'">
                    –†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="lose-modal">
        <div class="modal-header">
            <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</h2>
            <button class="close-modal" onclick="hideModal()">√ó</button>
        </div>
        <div class="modal-content">
            <p id="lose-reason">–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–∏–≥—Ä—ã—à–∞</p>

            <div class="stats">
                <p><strong>–í—Ä–µ–º—è:</strong> <span id="lose-time">00:00</span></p>
                <p><strong>–û—à–∏–±–æ–∫:</strong> <span id="lose-attempts">0</span></p>
                <p><strong>–ü–æ–≤–æ—Ä–æ—Ç—ã:</strong> <span id="lose-rotations">0</span></p>
                <p><strong>–ë–∞–ª–ª—ã:</strong> <span id="lose-score">0</span></p>
            </div>

            <div class="correct-hint">
                <div class="square" style="display: inline-block; position: relative; margin: 10px;">
                    <div class="correct-number"
                        style="position: absolute; top: -10px; right: -10px; background: #10b981; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px;">
                        ‚úì 3
                    </div>
                </div>
                <p><small>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç–º–µ—á–µ–Ω –∑–µ–ª—ë–Ω–æ–π –æ–±–≤–æ–¥–∫–æ–π –∏ –Ω–æ–º–µ—Ä–æ–º —Å–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞</small></p>
            </div>

            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="restartGame()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                <button class="modal-btn" onclick="window.location.href='../main_page/index.html'">
                    –í –º–µ–Ω—é
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã—Ö–æ–¥–∞ -->
    <div class="modal" id="confirm-exit-modal">
        <div class="modal-header">
            <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∞</h2>
            <button class="close-modal" onclick="hideModal()">√ó</button>
        </div>
        <div class="modal-content">
            <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É? –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —É—Ç–µ—Ä—è–Ω!</p>
            <div class="confirm-buttons">
                <button class="confirm-btn danger" onclick="goBack()">–£–π—Ç–∏</button>
                <button class="confirm-btn secondary" onclick="hideModal()">–û—Å—Ç–∞—Ç—å—Å—è</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ -->
    <div class="modal" id="confirm-restart-modal">
        <div class="modal-header">
            <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞</h2>
            <button class="close-modal" onclick="hideModal()">√ó</button>
        </div>
        <div class="modal-content">
            <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É? –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —É—Ç–µ—Ä—è–Ω!</p>
            <div class="confirm-buttons">
                <button class="confirm-btn danger" onclick="restartGame()">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
                <button class="confirm-btn secondary" onclick="hideModal()">–û—Ç–º–µ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–º–µ–Ω—ã –∏–º–µ–Ω–∏ -->
    <div class="modal" id="name-modal">
        <div class="modal-header">
            <h2>–°–º–µ–Ω–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
            <button class="close-modal" onclick="hideNameModal()">√ó</button>
        </div>
        <div class="modal-content">
            <input type="text" id="new-username" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è" maxlength="20" class="name-input">
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="saveNewUsername()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="modal-btn" onclick="hideNameModal()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="name-modal-overlay"></div>

    <script src="square_game.js"></script>
</body>

</html>